<HTML> 
<HEAD>
<title>Idolem@ster シンデレラガールズ Starlight Stage</title>
<style type="text/css">
body {
    -webkit-text-size-adjust: none;
}
</style>

<script type="text/javascript"> 
let idol_list = new Array(	'あいばゆみ',
							'あらきひな',
							'いまいかな',
							'おおたゆう',
							'かみやなお',
							'きたひなこ',
							'きたみゆず',
							'きばまなみ',
							'きりのあや',
							'こがこはる',
							'さくままゆ',
							'ささきちえ',
							'さとうしん',
							'しぶやりん',
							'せきひろみ',
							'せなしおり',
							'ただりいな',
							'つちやあこ',
							'なかのゆか',
							'なたーりあ',
							'なんばえみ',
							'にわひとみ',
							'はらだみよ',
							'ひのあかね',
							'ふじいとも',
							'ほりゆうこ',
							'ほんだみお',
							'まとばりさ',
							'みふねみゆ',
							'みよしさな',
							'やぐちみう',
							'やまとあき',
							'ゆうきはる',
							'ゆさこずえ',
							'わくいるみ'
							)
var random = Math.floor( Math.random() * idol_list.length );
let idol_anser;
let ans_count = 0;
let current_score = 0;
function func_wordle_check(){
	let user_anser = document.getElementById('wordle_word').value;

let ans_word = [];
let ans_color = [];
let max_ans = Number(document.getElementById('ans_num').value);
let flag = 0 ;
	for(i=0;i<idol_list.length;i++){
		if(user_anser == idol_list[i])
			flag = 1;
	}
	if(ans_count == max_ans) ;
	else if(ans_count == max_ans+1){
		func_worlde_continue();
	}
	else if(user_anser.length < 5){
		document.getElementById("arert_comment").textContent   = "ちひろ「5文字のアイドルの名前を入力してください♪」";
		document.getElementById('wordle_word').focus();
	}
	else if(flag != 0){
		document.getElementById("arert_comment").textContent   = "　";
		ans_count++;
		for(var i= 0; i < user_anser.length ; i++){
			ans_color[i] =  '';
			for(var j= 0; j < user_anser.length ; j++){
				if(user_anser[i] == idol_anser[j]){
					if(i==j){
						document.getElementById(user_anser[i]).style.backgroundColor = 'green';
					}
					else if(document.getElementById(user_anser[i]).style.backgroundColor != 'green'){
						document.getElementById(user_anser[i]).style.backgroundColor = 'orange';
					}
					else ;
				}
				else if(document.getElementById(user_anser[i]).style.backgroundColor == 'green' || document.getElementById(user_anser[i]).style.backgroundColor == 'orange') ;
				else{
					document.getElementById(user_anser[i]).style.backgroundColor = 'gray';
				}

				if(user_anser[i] == idol_anser[j]){
					if(i==j){
						ans_color[i] =  'green';
					}
					else if(ans_color[i] != 'green'){
						ans_color[i] = 'orange';
					}
					else ;
				}
				else if(ans_color[i] == 'green' || ans_color[i] == 'orange') ;
				else
					ans_color[i] = 'gray';
			}
		}
		for(var i= 0; i < user_anser.length ; i++){
			var id_ans = "ans"+ans_count+"_"+(i+1);
			document.getElementById(id_ans).innerText  = user_anser[i];
			document.getElementById(id_ans).style.backgroundColor = ans_color[i];
		}
		if(user_anser == idol_anser){
			document.getElementById("arert_comment").textContent   = "ちひろ「正解です！報酬はスタージュエルを購入できる権利です♪」";
			document.getElementById('wordle_word').value="";
			document.getElementById('wordle_check').value = "続けて挑戦";
			let x =2* (ans_count)/max_ans;
			current_score += Math.ceil(10000*(1/Math.sqrt(0.008*Math.PI))*Math.exp(-(x*x)/2));
			
			document.getElementById("score").textContent   = current_score;
			ans_count = max_ans+1;

		}
		else if(ans_count < max_ans){
		document.getElementById('wordle_word').focus();
		document.getElementById('wordle_word').value="";
		}
	}
	else{
		document.getElementById("arert_comment").textContent   = "ちひろ「その名前のアイドルは事務所にいませんよ？」";
		document.getElementById('wordle_word').focus();
	}
	if(ans_count == max_ans){
		document.getElementById("arert_comment").textContent   = "ちひろ「正解は『"+idol_anser+"』ちゃんでした！」";
		document.getElementById('wordle_word').value="";
		document.getElementById('wordle_check').disabled = true;
	}
}
function func_worlde_continue(){
var random = Math.floor( Math.random() * idol_list.length );
let max_ans = Number(document.getElementById('ans_num').value);
	idol_anser = idol_list[random]
	var st_list = document.getElementsByClassName('hyou');
	for(var i =0 ;i < st_list.length ; i++)
		st_list[i].childNodes[0].style.backgroundColor = '';
	for(i= 1; i <=  max_ans  ; i++){
		for(j= 1; j < 6 ; j++){
			var id_ans = "ans"+i+"_"+j;
			document.getElementById(id_ans).innerText  ="　";
			document.getElementById(id_ans).style.backgroundColor = '';

		}
	}
	document.getElementById('wordle_word').focus();
	document.getElementById("arert_comment").innerText  ="　";
	ans_count = 0;
	document.getElementById('wordle_word').value="";
	document.getElementById("arert_comment").textContent   = "ちひろ「プロデューサーさん、頑張ってください！」";
	document.getElementById('wordle_check').value = "チェック";
}

function func_wordle_reset(){
var random = Math.floor( Math.random() * idol_list.length );
let max_ans = Number(document.getElementById('ans_num').value);
	idol_anser = idol_list[random]
	var st_list = document.getElementsByClassName('hyou');
	for(var i =0 ;i < st_list.length ; i++)
		st_list[i].childNodes[0].style.backgroundColor = '';
	for(i= 1; i <=  max_ans  ; i++){
		for(j= 1; j < 6 ; j++){
			var id_ans = "ans"+i+"_"+j;
			document.getElementById(id_ans).innerText  ="　";
			document.getElementById(id_ans).style.backgroundColor = '';
		}
	}
	document.getElementById('wordle_word').focus();
	document.getElementById("arert_comment").innerText  ="　";
	ans_count = 0;
	document.getElementById('wordle_word').value="";
	document.getElementById("arert_comment").textContent   = "ちひろ「スタートです！プロデューサーさん、頑張ってください！」";
	document.getElementById('wordle_check').disabled = false;
	current_score = 0;
	document.getElementById("score").textContent   = current_score;
	document.getElementById('wordle_check').value = "チェック";
}

function func_check_num(){
	let input_value = Number(document.getElementById('ans_num').value);
	let max_value = Number(document.getElementById('ans_num').max);
	let min_value = Number(document.getElementById('ans_num').min);
	
	if(input_value > max_value){
		document.getElementById('ans_num').value = max_value;
	}
	else if(input_value < min_value){
		document.getElementById('ans_num').value = min_value ;
	}
		
	else{
		let before_ans_table_row_num = document.getElementById('ans_table').rows.length;
		for(i=0;i<before_ans_table_row_num;i++)
			document.getElementById('ans_table').deleteRow(-1);
		for(i=0;i<document.getElementById('ans_num').value;i++){
			document.getElementById('ans_table').insertRow(-1); 
			for(j=0;j<6;j++)
				document.getElementById('ans_table').rows[i].insertCell(j);
		}
		for(i=0;i<document.getElementById('ans_num').value;i++){
			for(j=0;j<6;j++){
				if(j==0){
					document.getElementById('ans_table').rows[i].cells[j].innerHTML= i+1+".";
					document.getElementById('ans_table').rows[i].cells[j].style.borderWidth="0";
				}
				else{
					document.getElementById('ans_table').rows[i].cells[j].innerHTML= "　";
					document.getElementById('ans_table').rows[i].cells[j].id = "ans"+(i+1)+"_"+j;11
				}
			}
		}
	}
	func_wordle_reset();
}
function jpn(tbox){
tbox.style.imeMode="active";
}
function PageLoad(evt) {
	func_check_num();
	document.getElementById('wordle_check').addEventListener('click', func_wordle_check);
	document.getElementById('ans_num').addEventListener('change', func_check_num);
	document.getElementById('wordle_reset').addEventListener('click', func_wordle_reset);
}
</script>

<body onload="PageLoad();"  BGCOLOR="#EEEEEE" TEXT="#000000"  LEFTMARGIN=10 TOPMARGIN=10 >
<font size=5> Idolem@ster シンデレラガールズ <br>Starlight Stage</font><br>
シンデレラガールズスターライトステージに登場する<br>名前が5文字のアイドルのWordleです。<br>
回答入力欄のテキストボックスにアイドル名を入力して<br>
チェックボタンを押します。<br>
「<span style="background-color:#ffa500">オレンジ</span>」は文字は当たっているが位置が違う。<br>
「<span style="background-color:#008000	">緑</span>」は文字も位置も当たっている。<br>
「<span style="background-color:#808080	">灰色</span>」はその文字は使われていない。<br><br>

挑戦回数設定：<input type="number"  id="ans_num" value="5" style="width:45px" min="1" max="10" > 回
<table border=1  style="font-size: 15pt; border-style:none;" >
<tr ><td style="border-style:none" width=180px>
<table border=1 Frame="Void" style="font-size: 15pt; " id="ans_table">
回答結果
</table>
回答入力欄<br>
<input type="text"  maxlength=5  id="wordle_word" value=""  style="width:90%;font-size:100%;" inputmode="kana">
<div style="margin-right:1px;margin-top: 10px">
<input type="button"  id="wordle_check" value="チェック">
<input type="button"  id="wordle_reset" value="最初から">
</div>
</td><td style="border-style:none">

<table border=1 style="font-size: 12pt;" >
<tr>
<td class=hyou><div id="わ">わ</div></td>
<td class=hyou><div id="ら">ら</div></td>
<td class=hyou><div id="や">や</div></td>
<td class=hyou><div id="ま">ま</div></td>
<td class=hyou><div id="は">は</div></td>
<td class=hyou><div id="な">な</div></td>
<td class=hyou><div id="た">た</div></td>
<td class=hyou><div id="さ">さ</div></td>
<td class=hyou><div id="か">か</div></td>
<td class=hyou><div id="あ">あ</div></td>
</tr>
<tr>
<td ></td>
<td class=hyou><div id="り">り</div></td>
<td ></td>
<td class=hyou><div id="み">み</div></td>
<td class=hyou><div id="ひ">ひ</div></td>
<td class=hyou><div id="に">に</div></td>
<td class=hyou><div id="ち">ち</div></td>
<td class=hyou><div id="し">し</div></td>
<td class=hyou><div id="き">き</div></td>
<td class=hyou><div id="い">い</div></td>
</tr>
<tr >
<td class=hyou><div id="を">を</div></td>
<td class=hyou><div id="る">る</div></td>
<td class=hyou><div id="ゆ">ゆ</div></td>
<td class=hyou><div id="む">む</div></td>
<td class=hyou><div id="ふ">ふ</div></td>
<td class=hyou><div id="ぬ">ぬ</div></td>
<td class=hyou><div id="つ">つ</div></td>
<td class=hyou><div id="す">す</div></td>
<td class=hyou><div id="く">く</div></td>
<td class=hyou><div id="う">う</div></td>
</tr>
<tr>
<td ></td>
<td class=hyou><div id="れ">れ</div></td>
<td ></td>
<td class=hyou><div id="め">め</div></td>
<td class=hyou><div id="へ">へ</div></td>
<td class=hyou><div id="ね">ね</div></td>
<td class=hyou><div id="て">て</div></td>
<td class=hyou><div id="せ">せ</div></td>
<td class=hyou><div id="け">け</div></td>
<td class=hyou><div id="え">え</div></td>
</tr>
<tr>
<td class=hyou><div id="ん">ん</div></td>
<td class=hyou><div id="ろ">ろ</div></td>
<td class=hyou><div id="よ">よ</div></td>
<td class=hyou><div id="も">も</div></td>
<td class=hyou><div id="ほ">ほ</div></td>
<td class=hyou><div id="の">の</div></td>
<td class=hyou><div id="と">と</div></td>
<td class=hyou><div id="そ">そ</div></td>
<td class=hyou><div id="こ">こ</div></td>
<td class=hyou><div id="お">お</div></td>
</tr>
<tr>
<td colspan="10"></td>
</tr>
<tr>
<td ></td>
<td ></td>
<td class=hyou><div id="ぁ">ぁ</div></td>
<td class=hyou><div id="っ">っ</div></td>
<td class=hyou><div id="ゃ">ゃ</div></td>
<td class=hyou><div id="ぱ">ぱ</div></td>
<td class=hyou><div id="ば">ば</div></td>
<td class=hyou><div id="だ">だ</div></td>
<td class=hyou><div id="ざ">ざ</div></td>
<td class=hyou><div id="が">が</div></td>
</tr>
<tr>
<td ></td>
<td ></td>
<td class=hyou><div id="ぃ">ぃ</div></td>
<td ></td>
<td ></td>
<td class=hyou><div id="ぴ">ぴ</div></td>
<td class=hyou><div id="び">び</div></td>
<td class=hyou><div id="ぢ">ぢ</div></td>
<td class=hyou><div id="じ">じ</div></td>
<td class=hyou><div id="ぎ">ぎ</div></td>
</tr>
<tr>
<td ></td>
<td ></td>
<td class=hyou><div id="ぅ">ぅ</div></td>
<td class=hyou><div id="ー">ー</div></td>
<td class=hyou><div id="ゅ">ゅ</div></td>
<td class=hyou><div id="ぷ">ぷ</div></td>
<td class=hyou><div id="ぶ">ぶ</div></td>
<td class=hyou><div id="づ">づ</div></td>
<td class=hyou><div id="ず">ず</div></td>
<td class=hyou><div id="ぐ">ぐ</div></td>
</tr>
<tr>
<td ></td>
<td ></td>
<td class=hyou><div id="ぇ">ぇ</div></td>
<td ></td>
<td ></td>
<td class=hyou><div id="ぺ">ぺ</div></td>
<td class=hyou><div id="べ">べ</div></td>
<td class=hyou><div id="で">で</div></td>
<td class=hyou><div id="ぜ">ぜ</div></td>
<td class=hyou><div id="げ">げ</div></td>
</tr>
<tr>
<td ></td>
<td ></td>
<td class=hyou><div id="ぉ">ぉ</div></td>
<td ></td>
<td class=hyou><div id="ょ">ょ</div></td>
<td class=hyou><div id="ぽ">ぽ</div></td>
<td class=hyou><div id="ぼ">ぼ</div></td>
<td class=hyou><div id="ど">ど</div></td>
<td class=hyou><div id="ぞ">ぞ</div></td>
<td class=hyou><div id="ご">ご</div></td>
</tr>
</td></tr></table>
<br>
<br>
</td></tr>
</table>
現在の得点：<span id = score style="font-size:16px">0</span>点<br>
<span id = arert_comment style="font-size:16px"></span>
</body>
</HTML>
